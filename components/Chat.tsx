"use client";\n\nimport { VoiceProvider } from "@humeai/voice-react";\nimport type { ComponentProps } from "react";\nimport Messages from "./Messages";\nimport Controls from "./Controls";\nimport StartCall from "./StartCall";\nimport { ComponentRef, useRef } from "react";\nimport { toast } from "sonner";\n\nexport default function ClientComponent({\n  accessToken,\n}: {\n  accessToken: string;\n}) {\n  const timeout = useRef<number | null>(null);\n  const ref = useRef<ComponentRef<typeof Messages> | null>(null);\n\n  // optional: use configId from environment variable\n  const configId = process.env['NEXT_PUBLIC_HUME_CONFIG_ID'];\n\n  // Explicit props typing for VoiceProvider to improve readability and safety\n  type VoiceProviderProps = ComponentProps<typeof VoiceProvider>;\n  const voiceProviderProps: VoiceProviderProps = {\n    onMessage: () => {\n      if (timeout.current) {\n        window.clearTimeout(timeout.current);\n      }\n\n      timeout.current = window.setTimeout(() => {\n        if (ref.current) {\n          const scrollHeight = ref.current.scrollHeight;\n\n          ref.current.scrollTo({\n            top: scrollHeight,\n            behavior: "smooth",\n          });\n        }\n      }, 200);\n    },\n    onError: (error: any) => {\n      console.error("Chat: VoiceProvider error", error);\n      toast.error(error.message);\n    }\n  };\n  \n  return (\n    <div\n      className={\n        "relative grow flex flex-col mx-auto w-full overflow-hidden h-[0px]"\n      }\n    >\n      <VoiceProvider {...voiceProviderProps}>\n        <Messages ref={ref} />\n        <Controls />\n        <StartCall configId={configId} accessToken={accessToken} />\n      </VoiceProvider>\n    </div>\n  );\n}\n